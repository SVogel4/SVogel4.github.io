<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Sarah Vogel – Startseite</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
        :root{
      --primary:#909191;
      --accent:rgb(59, 110, 92);
      --card-bg:#fff;
      --page-bg:#848b95;
      --text:#222;
      --muted:#6b6f74;
      --border:#d0d7db;
      --table-hover:#e8f7f0;
      --card-shadow:0 6px 24px rgba(32,181,129,0.12);
    }
    body.dark{ 
      --page-bg:#0b0d0e; 
      --primary:#cfd8dc; 
      --card-bg:#0f1820; 
      --text:#e6eef4; 
      --muted:#98a1a7; 
      --border:rgba(255,255,255,0.06); 
      --table-hover:rgba(32,181,129,0.06); 
      --card-shadow:0 8px 30px rgba(0,0,0,0.6); 
    }
    html,body{margin:0;padding:0;background:var(--page-bg);color:var(--text);font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial;line-height:1.6}
    header{background:var(--primary);color:#fff;padding:1rem 1.2rem;display:flex;align-items:center;justify-content:space-between;gap:1rem}
    .title{flex:1;text-align:center}
    .title h1{margin:0;font-size:1.25rem}
    .title p{margin:0;font-size:.95rem;opacity:.95}
    .main-nav{display:flex;gap:.6rem;justify-content:center;margin-top:.45rem}
    .main-nav a{color:#fff;text-decoration:none;padding:.35rem .7rem;border-radius:8px;font-size:.95rem;border:1px solid transparent}
    .main-nav a.active{background:#d0d0d0;color:var(--text);font-weight:600}
    .main-nav a:hover{background:rgba(255,255,255,0.06)}
    #theme-toggle{background:transparent;border:1px solid rgba(255,255,255,.12);color:#fff;padding:.45rem .7rem;border-radius:10px;cursor:pointer;display:inline-flex;align-items:center;gap:.6rem}
    #theme-toggle svg{width:18px;height:18px}
    /* breiterer weißer Bereich für Seiteninhalt (größerer Seitenrand) */
    main{max-width:1300px;margin:1.6rem auto;padding:1.6rem;display:flex;flex-direction:column;gap:1.4rem}
    section{background:var(--card-bg);border-radius:12px;box-shadow:var(--card-shadow);padding:1.4rem;border:1px solid var(--border)}
    .center-img{display:flex;flex-direction:column;align-items:center;margin:1rem 0}
    .center-img img{width:220px;height:220px;object-fit:cover;border-radius:8px;border:3px solid var(--primary);box-shadow:0 8px 20px rgba(0,0,0,.08)}
    table{width:100%;border-collapse:collapse;margin-top:.8rem}
    th,td{border:1px solid var(--border);padding:.6rem;text-align:left}
    th{background:var(--primary);color:#fff}
    tbody tr:hover{background:var(--table-hover)}

    /* Galerie */
    .gallery{
      display:flex;
      flex-wrap:wrap;
      gap:1.2rem;
      justify-content:space-between;
    }
    .card{
      flex: 1 1 calc(33.333% - 0.8rem);
      min-width:220px;
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: var(--card-shadow);
      border: 1px solid var(--border);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }
    .card img{
      width:100%;
      height:180px;
      object-fit:cover;
    }
    .card-content{
      padding:.9rem;
    }
    .card-title{font-weight:600;color:var(--primary);margin-bottom:.4rem}
    .card-text{color:var(--muted);font-size:.95rem}

    /* About */
    .about-card{max-width:900px;margin:0.6rem auto 0;text-align:center;color:var(--muted);background:var(--card-bg);border:1px solid var(--border);border-radius:12px;box-shadow:var(--card-shadow);padding:0.9rem 1rem;}
    @media (max-width:720px){ .about-card{ margin:0.5rem 1rem 0; padding:0.8rem; } }

    /* Kontaktkarte */
    .contact-card{position:fixed;right:1.2rem;bottom:1.2rem;display:flex;gap:0.5rem;align-items:center;padding:0.5rem;background:var(--card-bg);border:1px solid var(--border);border-radius:10px;box-shadow:var(--card-shadow);z-index:40;}
    .contact-card a{display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:8px;text-decoration:none;border:1px solid transparent;background:transparent;}
    .contact-card a svg{ width:20px; height:20px; fill:var(--primary); display:block }
    .contact-card a:hover{ background:rgba(0,0,0,0.04) }
    @media (max-width:720px){ .contact-card{ display:none } }

    /* News 2-spaltig */
    #news-items {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
    }
    #news-items article {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      box-shadow: var(--card-shadow);
    }
    #news-items img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }

    /* Karten-Grid unter Projects */
    .map-grid{
      display:grid;
      gap:1rem;
      margin-top:1rem;
      /* Drei Karten nebeneinander auf großen Bildschirmen, responsive auf kleinere Geräte */
      grid-template-columns: repeat(3, 1fr);
    }
    @media (max-width:1000px){
      .map-grid{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width:720px){
      .map-grid{ grid-template-columns: 1fr; }
    }
    .map-card{
      background:var(--card-bg);
      border:1px solid var(--border);
      border-radius:10px;
      box-shadow:var(--card-shadow);
      overflow:hidden;
      display:flex;
      flex-direction:column;
    }
    .map-card .map-title{padding:.6rem .9rem;border-bottom:1px solid var(--border);font-weight:600;color:var(--primary)}
    /* größere Kartenvorschau */
    .map-card iframe{width:100%;height:360px;border:0;display:block}
    @media (max-width:720px){ .map-card iframe{height:220px} }

    /* einzelne Karte in voller Breite einer Spalte (zentriert unter drei Karten) */
    .map-grid.map-single-row{ grid-template-columns: repeat(3, 1fr); }
    .map-card.map-single{ grid-column: 2 / 3; width:100%; }
    @media (max-width:1000px){
      .map-grid.map-single-row{ grid-template-columns: repeat(2, 1fr); }
      .map-card.map-single{ grid-column: 1 / -1; max-width: none; }
    }
    @media (max-width:720px){
      .map-grid.map-single-row{ grid-template-columns: 1fr; }
      .map-card.map-single{ grid-column: 1 / -1; }
    }

    /* kleiner Cesium-Container in der Vorschau: passt zur iframe-Höhe */
    #cesiumContainer { width:100%; height:360px; border:0; display:block; }
    @media (max-width:720px){ #cesiumContainer { height:220px; } }
  </style>

  <!-- Cesium CSS (für 3D-Viewer) -->
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.125/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
 </head>
 <body>
<header>
  <div class="title">
    <h1>Sarah Vogel</h1>
    <p>Willkommen auf meiner persönlichen Startseite!</p>
    <nav class="main-nav" role="navigation" aria-label="Hauptnavigation">
      <a href="#about" id="about-link" class="active">About</a>
      <a href="#" id="news-link" data-src="news.json">News</a>
      <a href="#projects" id="projects-link">Projects</a>
    </nav>
  </div>
  <button id="theme-toggle" aria-pressed="false" title="Wechseln: Hell/Dunkel">
    <svg id="theme-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="#fff"/>
    </svg>
    <span id="theme-label">Dunkel</span>
  </button>
</header>

<main>
<section id="about-desc" class="about-card">
  <p>Ich studiere Geoinformatik und interessiere mich für Karten, Datenanalyse und Webentwicklung. Ich bin eine analytische und neugierige Person mit einer großen Begeisterung für Technik. Mein Interesse gilt insbesondere Geodaten, Karten und der Analyse räumlicher Informationen. Darüber hinaus faszinieren mich Programmierung, Webentwicklung und die Arbeit an Open-Source-Projekten.</p>
</section>

<figure class="center-img">
  <img src="IMG_1653.JPEG" alt="Sarah Vogel">
  <figcaption>Sarah Vogel</figcaption>
</figure>

<section id="about-section">
  <h2>Über mich</h2>
  <table>
    <thead><tr><th>Jahr</th><th>Station</th><th>Ort</th><th>Bereich</th></tr></thead>
    <tbody>
      <tr><td>2023</td><td>Studienbeginn</td><td>Mainz</td><td>Geoinformatik</td></tr>
      <tr><td>2022</td><td>Vorpraktikum</td><td>Landau</td><td>VermKA</td></tr>
      <tr><td>2021</td><td>Praktikum</td><td>Wörth</td><td>Engagement</td></tr>
    </tbody>
  </table>
</section>

<section id="news-section" style="display:none">
  <h2>News</h2>
  <div id="news-items"><p>Keine News geladen.</p></div>
</section>

<section id="projects-section">
      <!-- Drei Karten nebeneinander -->
      <h2>Karten</h2>
      <div class="map-grid" aria-label="Projektkarten" style="margin-top:0.6rem">
         <div class="map-card">
           <div class="map-title">Basiskarte</div>
           <iframe src="map_1_basiskarte.html" title="Basiskarte" data-view="germany"></iframe>
         </div>
         <div class="map-card">
           <div class="map-title">persönlich wichtige Orte</div>
           <!-- Europe view -->
           <iframe src="map_2_punkte.html" title="persönlich wichtige Orte" data-view="europe"></iframe>
         </div>
         <div class="map-card">
           <div class="map-title">Reiseroute des letzten Urlaubs</div>
           <!-- Europe view -->
           <iframe src="map_3_reiseroute.html" title="Reiseroute des letzten Urlaubs" data-view="europe"></iframe>
         </div>
      </div>

      <!-- Vierte Karte: in eigener 3‑Spalten‑Grid, mittig (hat gleiche Breite wie eine Spalte) -->
      <div class="map-grid" style="margin-top:1rem; grid-template-columns: repeat(3,1fr); gap:1rem" aria-label="Karte4 + 3D + Kepler">
        <div class="map-card">
          <div class="map-title">Karte der besuchten Länder</div>
          <iframe src="map_4_basiskarte.html" title="Karte der besuchten Länder" data-view="europe"></iframe>
        </div>

        <div class="map-card">
          <div class="map-title">3D-Gebäude (Cesium, LoD2)</div>
          <div id="cesiumContainer" role="application" aria-label="3D Gebäude Ansicht" style="width:100%;height:360px"></div>
        </div>

        <div class="map-card">
          <div class="map-title">Kepler.gl — interaktive Visualisierung</div>
          <iframe src="kepler.gl.html" title="Kepler.gl" style="width:100%;height:360px;border:0"></iframe>
        </div>
      </div>
     </section>

<div id="contact-card" class="contact-card" aria-label="Kontakt">
  <a href="mailto:email@example.com" title="E-Mail" aria-label="E-Mail">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
  </a>
  <a href="https://github.com/SVogel4" target="_blank" rel="noopener" title="GitHub" aria-label="GitHub">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 .5a12 12 0 00-3.8 23.4c.6.1.8-.3.8-.6v-2.2c-3.3.7-4-1.6-4-1.6-.5-1.2-1.2-1.6-1.2-1.6-1-.7.1-.7.1-.7 1.1.1 1.7 1.1 1.7 1.1 1 .1 1.6-.8 1.9-1.2-.8-.1-1.6-.4-1.6-1.7 0-.4.1-.8.4-1.1-1.2-.1-2.5-.6-2.5-2.6 0-.6.2-1.1.6-1.6 0-.2-.2-.7.1-1.5 0 0 .5-.2 1.8.6.5-.1 1.1-.2 1.6-.2s1.1.1 1.6.2c1.3-.8 1.8-.6 1.8-.6.3.8.1 1.3.1 1.5.4.5.6 1 .6 1.6 0 2-1.3 2.5-2.5 2.6.4.3.6.7.6 1.4v2.1c0 .3.2.7.8.6A12 12 0 0012 .5z"/></svg>
  </a>
  <a href="https://www.linkedin.com" target="_blank" rel="noopener" title="LinkedIn" aria-label="LinkedIn">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M4.98 3.5a2.5 2.5 0 11.02 0zM3 8.98h4v12H3zM9 8.98h3.8v1.6h.1c.5-.9 1.7-1.9 3.5-1.9 3.7 0 4.4 2.4 4.4 5.5v6.8h-4v-6c0-1.4 0-3.2-2-3.2-2 0-2.4 1.6-2.4 3.1v6.1H9z"/></svg>
  </a>
</div>

<script>
(function(){
  const t = document.getElementById('theme-toggle');
  const label = document.getElementById('theme-label');
  const icon = document.getElementById('theme-icon');
  const stored = localStorage.getItem('theme');
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  let dark = stored ? stored==='dark' : prefersDark;
  function apply(d){
    document.body.classList.toggle('dark', d);
    t.setAttribute('aria-pressed', d?'true':'false');
    label.textContent = d?'Hell':'Dunkel';
    icon.innerHTML = d?'<path d="M6.76 4.84l-1.8-1.79L3.17 5.84l1.79 1.8L6.76 4.84zM1 13h3v-2H1v2zm10 9h2v-3h-2v3zm9-9v2h3v-2h-3zM17.24 4.84l1.79 1.8 1.79-2.79-1.79-1.8-1.79 2.79zM12 6a6 6 0 100 12 6 6 0 000-12z" fill="#fff"/>' : '<path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" fill="#fff"/>';
  }
  apply(dark);
  t.addEventListener('click',()=>{ dark = !document.body.classList.contains('dark'); apply(dark); localStorage.setItem('theme', dark?'dark':'light'); });
})();

(function(){
    const aboutLink=document.getElementById('about-link');
    const newsLink=document.getElementById('news-link');
    const projectsLink=document.getElementById('projects-link');
    const aboutSection=document.getElementById('about-section');
    const newsSection=document.getElementById('news-section');
    const projectsSection=document.getElementById('projects-section');
    const navLinks=Array.from(document.querySelectorAll('.main-nav a'));
    const aboutDesc=document.getElementById('about-desc');

    function setActive(link){ navLinks.forEach(a=>a.classList.remove('active')); link&&link.classList.add('active'); }
    function showSection(sec){
      [aboutSection,newsSection,projectsSection].forEach(s=>{ if(s) s.style.display='none'; });
      if(sec) sec.style.display='block';
      aboutDesc&&(aboutDesc.style.display=(sec===aboutSection)?'block':'none');
      const contact=document.getElementById('contact-card');
      if(contact) contact.style.display=(sec===aboutSection)?'flex':'none';
      sec&&sec.scrollIntoView({behavior:'smooth',block:'start'});
    }

    showSection(aboutSection); setActive(aboutLink);

    aboutLink&&aboutLink.addEventListener('click',ev=>{ev.preventDefault(); setActive(aboutLink); showSection(aboutSection);});

    newsLink&&newsLink.addEventListener('click',ev=>{ // klick-Handler bleibt bestehen
      ev.preventDefault(); setActive(newsLink); showSection(newsSection);
      const container=document.getElementById('news-items');
      if(!container) return; container.innerHTML='<p>Lade News…</p>';
      const url=newsLink.dataset.src||'news.json';
      fetch(url,{cache:'no-store'}).then(r=>{if(!r.ok)throw new Error('HTTP '+r.status); return r.json();})
      .then(data=>{
        if(!Array.isArray(data)||data.length===0){ container.innerHTML='<p>Keine News vorhanden.</p>'; return; }
        const esc=s=>String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
        container.innerHTML=data.map(n=>{
          return `<article>
            <h3>${esc(n.title)}</h3>
            ${n.date?`<div style="font-size:.9rem;opacity:.75;margin-bottom:.5rem">${esc(n.date)}</div>`:''}
            ${n.image?`<div><img src="${esc(n.image)}" alt="${esc(n.title)}"></div>`:''}
            ${n.summary?`<p>${esc(n.summary)}</p>`:''}
            ${n.content?`<div>${esc(n.content)}</div>`:''}
          </article>`;
        }).join('');
      }).catch(err=>{ console.error(err); container.innerHTML='<p>Fehler beim Laden der News.</p>'; });
    });

    // News laden / rendern (einheitlich, sicherer)
    (function(){
      const container = document.getElementById('news-items');
      if(!container) return;
      const url = newsLink && newsLink.dataset.src ? newsLink.dataset.src : 'news.json';
      let cached = null;

      function esc(s){ return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
      function render(data){
        if(!Array.isArray(data) || data.length === 0){ container.innerHTML = '<p>Keine News vorhanden.</p>'; return; }
        container.innerHTML = data.map(n => {
          return `<article>
            <h3>${esc(n.title)}</h3>
            ${n.date?`<div style="font-size:.9rem;opacity:.75;margin-bottom:.5rem">${esc(n.date)}</div>`:''}
            ${n.image?`<div><img src="${esc(n.image)}" alt="${esc(n.title)}"></div>`:''}
            ${n.summary?`<p>${esc(n.summary)}</p>`:''}
            ${n.content?`<div>${n.content}</div>`:''}
          </article>`;
        }).join('');
      }

      async function loadNews(force){
        if(cached && !force){ render(cached); return; }
        container.innerHTML = '<p>Lade News…</p>';
        try{
          const resp = await fetch(url, { cache: 'no-store' });
          if(!resp.ok) throw new Error('HTTP '+resp.status);
          const data = await resp.json();
          cached = data;
          render(data);
        }catch(err){
          console.error('News load failed', err);
          container.innerHTML = '<p>Fehler beim Laden der News.</p>';
        }
      }

      // preload once (silent) so view is fast on click
      loadNews(false);
      // on click always refresh to get fresh content
      newsLink&&newsLink.addEventListener('click',ev=>{
        ev.preventDefault(); setActive(newsLink); showSection(newsSection);
        loadNews(true);
      }, { once:false });
    })();

    projectsLink&&projectsLink.addEventListener('click',ev=>{ev.preventDefault(); setActive(projectsLink); showSection(projectsSection);});
  })();

// Erzwinge für eingebettete Karten in .map-card die Deutschland‑Ansicht
(function(){
    // [southWest, northEast]
    const germanyBbox = [[47.2, 5.8], [55.1, 15.2]];
    const germanyCenter = [(47.2 + 55.1) / 2, (5.8 + 15.2) / 2]; // ~[51.15, 10.5]
    const desiredZoom = 6; // gewünschter Zoomlevel für Deutschland-Übersicht

    function setGermanyViewOnMap(map){
      try{
        if(!map) return false;
        // bevorzugt: fitBounds mit maxZoom, dann ggf. setView um konsistenten Zoom zu erzwingen
        if(typeof map.fitBounds === 'function'){
          try{
            map.fitBounds(germanyBbox, { padding: [20,20], maxZoom: desiredZoom });
          }catch(e){}
        }
        if(typeof map.setView === 'function'){
          try{
            // setView erst nach kurzer Verzögerung, falls fitBounds erst asynchron wirkt
            setTimeout(()=> {
              try{ map.setView(germanyCenter, desiredZoom); }catch(e){}
            }, 120);
          }catch(e){}
        }
        return true;
      }catch(e){
        return false;
      }
    }

    function adjustIframeToGermany(iframe){
      try{
        const win = iframe.contentWindow;
        if(!win) return;

        // 1) direkte global 'map' Variable (von Leaflet / Folium)
        try{
          if(win.map && setGermanyViewOnMap(win.map)) return;
        }catch(e){}

        // 2) Suche nach Leaflet-Instanzen in globalen Variablen des iframe
        try{
          if(win.L && typeof win.L === 'object'){
            for(const k in win){
              try{
                const cand = win[k];
                if(setGermanyViewOnMap(cand)) return;
              }catch(e){}
            }
          }
        }catch(e){}

        // 3) Allgemeine Suche nach Objekten mit fitBounds / setView (Fallback)
        for(const k in win){
          try{
            const v = win[k];
            if(v && (typeof v.fitBounds === 'function' || typeof v.setView === 'function')){
              if(setGermanyViewOnMap(v)) return;
            }
          }catch(e){}
        }

        // 4) Falls Leaflet nicht als Objekt zugreifbar ist, versuche eval im iframe (gleiche Origin erforderlich)
        try{
          if(typeof win.eval === 'function'){
            const code = `
              (function(){
                try{
                  var bbox = ${JSON.stringify(germanyBbox)};
                  var center = ${JSON.stringify(germanyCenter)};
                  var z = ${desiredZoom};
                  if(window.map && typeof window.map.fitBounds === 'function'){
                    window.map.fitBounds(bbox, {padding:[20,20], maxZoom: z});
                    setTimeout(()=>{ try{ window.map.setView(center,z); }catch(e){} }, 120);
                    return;
                  }
                  if(window.L && window.L.map){
                    // finde erste Karte-Instanz und setze bounds
                    for(var k in window){
                      try{
                        var cand = window[k];
                        if(cand && typeof cand.fitBounds === 'function'){
                          cand.fitBounds(bbox, {padding:[20,20], maxZoom: z});
                          setTimeout(()=>{ try{ cand.setView(center,z); }catch(e){} }, 120);
                          return;
                        }
                      }catch(e){}
                    }
                  }
                }catch(e){}
              })();`;
            win.eval(code);
          }
        }catch(e){}
      }catch(e){
        // Cross-origin oder andere Fehler — cannot adjust
        console.debug('adjustIframeToGermany failed for', iframe.src, e);
      }
    }

    // beobachte alle iframes in .map-card
    document.querySelectorAll('.map-card iframe').forEach(iframe => {
      iframe.addEventListener('load', ()=> adjustIframeToGermany(iframe));
      try{
        if(iframe.contentDocument && iframe.contentDocument.readyState === 'complete'){
          adjustIframeToGermany(iframe);
        }
      }catch(e){}
    });
  })();
  </script>

  <!-- Cesium JS -->
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.125/Build/Cesium/Cesium.js"></script>
  <script>
    (function(){
      if(typeof Cesium === 'undefined') return;
      // Viewer initialisieren
      const viewer = new Cesium.Viewer('cesiumContainer', {
        shadows: false,
        geocoder: false,
        baseLayerPicker: false,
        timeline: false,
        animation: false,
        infoBox: false,
        selectionIndicator: false
      });

      // OSM als Hintergrund (optional)
      const osm = new Cesium.OpenStreetMapImageryProvider({
        url : '//a.tile.openstreetmap.org/',
        credit: new Cesium.Credit('<a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>', true)
      });
      viewer.imageryLayers.addImageryProvider(osm);

      // WMS Basemapde (optional, kann entfernt werden)
      const provider = new Cesium.WebMapServiceImageryProvider({
        url : 'https://sgx.geodatenzentrum.de/wms_basemapde?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetCapabilities',
        layers: "de_basemapde_web_raster_farbe",
        parameters: { transparent: true, format: "image/png" }
      });
      viewer.imageryLayers.addImageryProvider(provider);

      // Kameraposition (Beispiel)
      viewer.camera.flyTo({
        destination: Cesium.Cartesian3.fromDegrees(6.958215,50.932767, 1500.0),
        orientation: { heading: Cesium.Math.toRadians(0.0), pitch: Cesium.Math.toRadians(-50.0), roll: 0.0 }
      });

      // Tileset-URL (LoD2 Gebäude, live)
      const tilesetUrl = "https://sgx.geodatenzentrum.de/gdz_basemapde_3d_gebaeude/lod2_4978_null.json";
      const tileset = new Cesium.Cesium3DTileset({ url: tilesetUrl, maximumScreenSpaceError: 8, maximumMemoryUsage: 512 });
      viewer.scene.primitives.add(tileset);

      tileset.readyPromise.then(() => {
        // style nach 'surface' property (wall/roof/bridge) falls vorhanden
        tileset.style = new Cesium.Cesium3DTileStyle({
          color : {
            conditions : [
              ["${surface} === 'wall'", "color('#f2f2f2')"],
              ["${surface} === 'roof'", "color('#ff5c4d')"],
              ["${surface} === 'bridge'", "color('#999999')"],
              ["true", "color('#d3d3d3')"]
            ]
          }
        });
        viewer.zoomTo(tileset).otherwise(()=> {
          viewer.camera.setView({ destination: Cesium.Rectangle.fromDegrees(5.8,47.2,15.2,55.1) });
        });
      }).otherwise(err=>{
        console.error('Tileset load error', err);
        viewer.camera.setView({ destination: Cesium.Rectangle.fromDegrees(5.8,47.2,15.2,55.1) });
      });

      // Klick: Eigenschaften anzeigen (einfaches Overlay)
      const handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);
      handler.setInputAction(function(click) {
        const picked = viewer.scene.pick(click.position);
        if(!Cesium.defined(picked) || !picked.getPropertyNames) return;
        const names = picked.getPropertyNames();
        const info = names.map(n => `<b>${n}:</b> ${picked.getProperty(n)}`).join('<br>');
        let overlay = document.getElementById('cesium-info-overlay');
        if(!overlay){
          overlay = document.createElement('div');
          overlay.id = 'cesium-info-overlay';
          overlay.style.position = 'absolute';
          overlay.style.right = '8px';
          overlay.style.bottom = '8px';
          overlay.style.maxWidth = '320px';
          overlay.style.zIndex = 9999;
          overlay.style.background = 'rgba(0,0,0,0.75)';
          overlay.style.color = 'white';
          overlay.style.padding = '8px';
          overlay.style.borderRadius = '6px';
          document.getElementById('cesiumContainer').appendChild(overlay);
        }
        overlay.innerHTML = `<strong>Feature</strong><br>${info}<br><button id="closeCesiumInfo">Schließen</button>`;
        document.getElementById('closeCesiumInfo').onclick = ()=> overlay.remove();
      }, Cesium.ScreenSpaceEventType.LEFT_CLICK);
    })();
  </script>
 </body>
</html>
